{"version":3,"sources":["../../src/pages/map-modal/map-modal.module.ts","../../src/pages/map-modal/map-modal.ts"],"names":[],"mappings":"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","file":"0.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { MapModalPage } from './map-modal';\n\n@NgModule({\n  declarations: [\n    MapModalPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(MapModalPage),\n  ],\n})\nexport class MapModalPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/map-modal/map-modal.module.ts","import { Component } from \"@angular/core\";\nimport {\n  IonicPage,\n  NavController,\n  NavParams,\n  ViewController\n} from \"ionic-angular\";\nimport { Diagnostic } from \"@ionic-native/diagnostic\";\nimport { HelperToolsProvider } from \"../../providers/helper-tools/helper-tools\";\nimport { Geolocation } from \"@ionic-native/geolocation\";\nimport { OpenNativeSettings } from \"@ionic-native/open-native-settings\";\n\n/**\n * Generated class for the MapModalPage page.\n *\n * See https://ionicframework.com/docs/components/#navigation for more info on\n * Ionic pages and navigation.\n */\ndeclare var google;\n\n@IonicPage()\n@Component({\n  selector: \"page-map-modal\",\n  templateUrl: \"map-modal.html\"\n})\nexport class MapModalPage {\n  public map: any;\n  public geocoder = new google.maps.Geocoder();\n\n  GoogleAutocomplete;\n  autocomplete;\n  autocompleteItems;\n  markers = [];\n  nearbyItems = [];\n  marker;\n  tabs = [];\n  // SegmantType = \"'map'\";\n  selected_pos = {};\n  public GooglePlaces;\n  constructor(\n    public navCtrl: NavController,\n    private geolocation: Geolocation,\n    private openNativeSettings: OpenNativeSettings,\n    private helperTools: HelperToolsProvider,\n    private diagnostic: Diagnostic,\n    public viewCtrl: ViewController,\n    public navParams: NavParams\n  ) {\n    this.GoogleAutocomplete = new google.maps.places.AutocompleteService();\n    this.autocomplete = { input: \"\" };\n    this.autocompleteItems = [];\n  }\n\n  ionViewDidLoad() {\n    this.checkIfLocationEnablenOrNot();\n    // this.InitMap();\n  }\n\n  ionViewDidEnter() {\n    // //Set latitude and longitude of some place\n    // this.map = new google.maps.Map(document.getElementById(\"map\"), {\n    //   center: { lat: 30.0444, lng: 31.2357 },\n    //   zoom: 15\n    // });\n  }\n\n  // tryGeolocation() {\n  //   this.geolocation\n  //     .getCurrentPosition()\n  //     .then(resp => {\n  //       let pos = {\n  //         lat: resp.coords.latitude,\n  //         lng: resp.coords.longitude\n  //       };\n  //       console.log(pos);\n  //       this.marker = new google.maps.Marker({\n  //         position: pos,\n  //         map: this.map,\n  //         title: \"I am here!\",\n  //         draggable: true,\n  //         animation: google.maps.Animation.DROP\n  //       });\n  //       this.marker.setDraggable(true), this.map.setCenter(pos);\n  //     })\n  //     .catch(error => {\n  //       this.helperTools.ShowAlertWithTranslation(\n  //         \"Error\",\n  //         \"PleaseTurnOnLocation\"\n  //       );\n  //       console.log(error);\n  //     });\n  // }\n\n  // addMarker() {\n  //   if (this.marker) {\n  //     this.marker.setPosition(this.map.getCenter());\n  //     this.marker.setDraggable(true);\n  //     return;\n  //   }\n  //   this.marker = new google.maps.Marker({\n  //     map: this.map,\n  //     draggable: true,\n  //     animation: google.maps.Animation.DROP,\n  //     //icon: 'https://maps.google.com/mapfiles/kml/shapes/parking_lot_maps.png',\n  //     position: this.map.getCenter()\n  //   });\n\n  //   let content = \"<h4>User Current Location!</h4>\";\n\n  //   this.addInfoWindow(this.marker, content);\n  // }\n\n  /////////////////////////////////DETERMINE MARK DRAGE POS////////////////////////////////\n\n  addInfoWindow(marker, content) {\n    let infoWindow = new google.maps.InfoWindow({\n      content: content\n    });\n\n    google.maps.event.addListener(marker, \"click\", () => {\n      infoWindow.open(this.map, marker);\n    });\n\n    google.maps.event.addListener(marker, \"dragend\", () => {\n      console.log(marker.getPosition());\n      this.selected_pos[\"lat\"] = marker.getPosition().lat();\n      this.selected_pos[\"lng\"] = marker.getPosition().lng();\n      console.log(this.selected_pos);\n      console.log(\"lat    \" + marker.getPosition().lat());\n      console.log(\"long   \" + marker.getPosition().lng());\n    });\n  }\n  /////////////////////////////////CLOSE MODAL////////////////////////////////////////////\n  done() {\n    this.viewCtrl.dismiss(this.selected_pos);\n  }\n  //////////////////////////////////////////////////CHECK LOCATION SERV///////////////////\n  checkIfLocationEnablenOrNot() {\n    return new Promise((resolve, reject) => {\n      this.diagnostic\n        .isLocationEnabled()\n        .then(enabled => {\n          if (enabled) {\n            this.InitMap();\n            resolve(\"done\");\n          } else {\n            this.navToLocationService();\n            reject(\"not enabled\");\n          }\n        })\n        .catch(err => {\n          this.navToLocationService();\n          reject(\"not enabled\");\n        });\n    });\n  }\n  ///////////////////////////////////////INTITALIZE MAP////////////////////////////////\n  InitMap() {\n    // if (this.geolocation) {\n    // this.geolocation.getCurrentPosition().then(\n    // position => {\n    //   let latLng = new google.maps.LatLng(\n    //     position.coords.latitude,\n    //     position.coords.longitude\n    //   );\n    // this.selected_pos[\"lat\"] = position.coords.latitude;\n    // this.selected_pos[\"lng\"] = position.coords.longitude;\n    //   console.log(position);\n    //   console.log(latLng);\n    let mapOptions = {\n      center: { lat: 30.0444, lng: 31.2357 },\n      enableHighAccuracy: true,\n      zoom: 15\n      // mapTypeId: google.maps.MapTypeId.ROADMAP\n    };\n\n    this.map = new google.maps.Map(\n      document.getElementById(\"map\"),\n      mapOptions\n    );\n    this.getTheUserCurrentPosAndPutMarker()\n    // },\n    err => {\n      console.log(err);\n      this.navToLocationService();\n      this.viewCtrl.dismiss();\n    }\n    // );\n    // }\n  }\n\n  closeModal() {\n    this.viewCtrl.dismiss();\n  }\n  getTheUserCurrentPosAndPutMarker() {\n    if (this.geolocation) {\n      this.geolocation.getCurrentPosition().then(\n        position => {\n          let latLng = new google.maps.LatLng(\n            position.coords.latitude,\n            position.coords.longitude\n          );\n          this.selected_pos[\"lat\"] = position.coords.latitude;\n          this.selected_pos[\"lng\"] = position.coords.longitude;\n          console.log(position);\n          console.log(latLng);\n\n          var marker = new google.maps.Marker({\n            map: this.map,\n            draggable: true,\n            animation: google.maps.Animation.DROP,\n            //icon: 'https://maps.google.com/mapfiles/kml/shapes/parking_lot_maps.png',\n            position: latLng\n          });\n          google.maps.event.trigger(this.map, \"resize\");\n          this.map.panTo(latLng);\n          this.map.setZoom(14);\n\n\n          // geocodePosition(marker.getPosition());\n          // this.markers.push(marker);\n          marker.setDraggable(true);\n          let content = \"<h4>Your current location!</h4>\";\n          this.addInfoWindow(marker, content);\n        }\n      );\n    }\n  }\n\n  navToLocationService() {\n    this.viewCtrl.dismiss();\n    this.helperTools.ShowAlertWithTranslation(\n      \"Error\",\n      \"Please turn on location service or give app permission to your location service.\"\n    );\n    this.openNativeSettings.open(\"location\").then(val => {\n      // alert('location')\n    }).catch(err => {\n      console.log(err);\n    })\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/map-modal/map-modal.ts"],"sourceRoot":""}