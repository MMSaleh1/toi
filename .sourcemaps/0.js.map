{"version":3,"sources":["../../src/pages/map-modal/map-modal.module.ts","../../src/pages/map-modal/map-modal.ts"],"names":[],"mappings":"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","file":"0.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { MapModalPage } from './map-modal';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    MapModalPage,\r\n  ],\r\n  imports: [\r\n    IonicPageModule.forChild(MapModalPage),\r\n  ],\r\n})\r\nexport class MapModalPageModule {}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/map-modal/map-modal.module.ts","import { Component } from \"@angular/core\";\r\nimport {\r\n  IonicPage,\r\n  NavController,\r\n  NavParams,\r\n  ViewController\r\n} from \"ionic-angular\";\r\nimport { Diagnostic } from \"@ionic-native/diagnostic\";\r\nimport { HelperToolsProvider } from \"../../providers/helper-tools/helper-tools\";\r\nimport { Geolocation } from \"@ionic-native/geolocation\";\r\nimport { OpenNativeSettings } from \"@ionic-native/open-native-settings\";\r\n\r\n/**\r\n * Generated class for the MapModalPage page.\r\n *\r\n * See https://ionicframework.com/docs/components/#navigation for more info on\r\n * Ionic pages and navigation.\r\n */\r\ndeclare var google;\r\n\r\n@IonicPage()\r\n@Component({\r\n  selector: \"page-map-modal\",\r\n  templateUrl: \"map-modal.html\"\r\n})\r\nexport class MapModalPage {\r\n  public map: any;\r\n  public geocoder = new google.maps.Geocoder();\r\n\r\n  GoogleAutocomplete;\r\n  autocomplete;\r\n  autocompleteItems;\r\n  markers = [];\r\n  nearbyItems = [];\r\n  marker;\r\n  tabs = [];\r\n  // SegmantType = \"'map'\";\r\n  selected_pos = {};\r\n  public GooglePlaces;\r\n  constructor(\r\n    public navCtrl: NavController,\r\n    private geolocation: Geolocation,\r\n    private openNativeSettings: OpenNativeSettings,\r\n    private helperTools: HelperToolsProvider,\r\n    private diagnostic: Diagnostic,\r\n    public viewCtrl: ViewController,\r\n    public navParams: NavParams\r\n  ) {\r\n    this.GoogleAutocomplete = new google.maps.places.AutocompleteService();\r\n    this.autocomplete = { input: \"\" };\r\n    this.autocompleteItems = [];\r\n  }\r\n\r\n  ionViewDidLoad() {\r\n    // this.checkIfLocationEnablenOrNot();\r\n    this.InitMap();\r\n  }\r\n\r\n  ionViewDidEnter() {\r\n    // //Set latitude and longitude of some place\r\n    // this.map = new google.maps.Map(document.getElementById(\"map\"), {\r\n    //   center: { lat: 30.0444, lng: 31.2357 },\r\n    //   zoom: 15\r\n    // });\r\n  }\r\n\r\n  // tryGeolocation() {\r\n  //   this.geolocation\r\n  //     .getCurrentPosition()\r\n  //     .then(resp => {\r\n  //       let pos = {\r\n  //         lat: resp.coords.latitude,\r\n  //         lng: resp.coords.longitude\r\n  //       };\r\n  //       console.log(pos);\r\n  //       this.marker = new google.maps.Marker({\r\n  //         position: pos,\r\n  //         map: this.map,\r\n  //         title: \"I am here!\",\r\n  //         draggable: true,\r\n  //         animation: google.maps.Animation.DROP\r\n  //       });\r\n  //       this.marker.setDraggable(true), this.map.setCenter(pos);\r\n  //     })\r\n  //     .catch(error => {\r\n  //       this.helperTools.ShowAlertWithTranslation(\r\n  //         \"Error\",\r\n  //         \"PleaseTurnOnLocation\"\r\n  //       );\r\n  //       console.log(error);\r\n  //     });\r\n  // }\r\n\r\n  // addMarker() {\r\n  //   if (this.marker) {\r\n  //     this.marker.setPosition(this.map.getCenter());\r\n  //     this.marker.setDraggable(true);\r\n  //     return;\r\n  //   }\r\n  //   this.marker = new google.maps.Marker({\r\n  //     map: this.map,\r\n  //     draggable: true,\r\n  //     animation: google.maps.Animation.DROP,\r\n  //     //icon: 'https://maps.google.com/mapfiles/kml/shapes/parking_lot_maps.png',\r\n  //     position: this.map.getCenter()\r\n  //   });\r\n\r\n  //   let content = \"<h4>User Current Location!</h4>\";\r\n\r\n  //   this.addInfoWindow(this.marker, content);\r\n  // }\r\n\r\n  /////////////////////////////////DETERMINE MARK DRAGE POS////////////////////////////////\r\n\r\n  addInfoWindow(marker, content) {\r\n    let infoWindow = new google.maps.InfoWindow({\r\n      content: content\r\n    });\r\n\r\n    google.maps.event.addListener(marker, \"click\", () => {\r\n      infoWindow.open(this.map, marker);\r\n    });\r\n\r\n    google.maps.event.addListener(marker, \"dragend\", () => {\r\n      console.log(marker.getPosition());\r\n      this.selected_pos[\"lat\"] = marker.getPosition().lat();\r\n      this.selected_pos[\"lng\"] = marker.getPosition().lng();\r\n      console.log(this.selected_pos);\r\n      console.log(\"lat    \" + marker.getPosition().lat());\r\n      console.log(\"long   \" + marker.getPosition().lng());\r\n    });\r\n  }\r\n  /////////////////////////////////CLOSE MODAL////////////////////////////////////////////\r\n  done() {\r\n    this.viewCtrl.dismiss(this.selected_pos);\r\n  }\r\n  //////////////////////////////////////////////////CHECK LOCATION SERV///////////////////\r\n  checkIfLocationEnablenOrNot() {\r\n    return new Promise((resolve, reject) => {\r\n      this.diagnostic\r\n        .isLocationEnabled()\r\n        .then(enabled => {\r\n          if (enabled) {\r\n            this.InitMap();\r\n            resolve(\"done\");\r\n          } else {\r\n            this.navToLocationService();\r\n            reject(\"not enabled\");\r\n          }\r\n        })\r\n        .catch(err => {\r\n          this.navToLocationService();\r\n          reject(\"not enabled\");\r\n        });\r\n    });\r\n  }\r\n  ///////////////////////////////////////INTITALIZE MAP////////////////////////////////\r\n  InitMap() {\r\n    // if (this.geolocation) {\r\n    // this.geolocation.getCurrentPosition().then(\r\n    // position => {\r\n    //   let latLng = new google.maps.LatLng(\r\n    //     position.coords.latitude,\r\n    //     position.coords.longitude\r\n    //   );\r\n    // this.selected_pos[\"lat\"] = position.coords.latitude;\r\n    // this.selected_pos[\"lng\"] = position.coords.longitude;\r\n    //   console.log(position);\r\n    //   console.log(latLng);\r\n    let mapOptions = {\r\n      center: { lat: 30.0444, lng: 31.2357 },\r\n      enableHighAccuracy: true,\r\n      zoom: 15\r\n      // mapTypeId: google.maps.MapTypeId.ROADMAP\r\n    };\r\n\r\n    this.map = new google.maps.Map(\r\n      document.getElementById(\"map\"),\r\n      mapOptions\r\n    );\r\n    this.getTheUserCurrentPosAndPutMarker()\r\n    // },\r\n    err => {\r\n      console.log(err);\r\n      this.navToLocationService();\r\n      this.viewCtrl.dismiss();\r\n    }\r\n    // );\r\n    // }\r\n  }\r\n\r\n  closeModal() {\r\n    this.viewCtrl.dismiss();\r\n  }\r\n  getTheUserCurrentPosAndPutMarker() {\r\n    if (this.geolocation) {\r\n      this.geolocation.getCurrentPosition().then(\r\n        position => {\r\n          let latLng = new google.maps.LatLng(\r\n            position.coords.latitude,\r\n            position.coords.longitude\r\n          );\r\n          this.selected_pos[\"lat\"] = position.coords.latitude;\r\n          this.selected_pos[\"lng\"] = position.coords.longitude;\r\n          console.log(position);\r\n          console.log(latLng);\r\n\r\n          var marker = new google.maps.Marker({\r\n            map: this.map,\r\n            draggable: true,\r\n            animation: google.maps.Animation.DROP,\r\n            //icon: 'https://maps.google.com/mapfiles/kml/shapes/parking_lot_maps.png',\r\n            position: latLng\r\n          });\r\n          google.maps.event.trigger(this.map, \"resize\");\r\n          this.map.panTo(latLng);\r\n          this.map.setZoom(14);\r\n\r\n\r\n          // geocodePosition(marker.getPosition());\r\n          // this.markers.push(marker);\r\n          marker.setDraggable(true);\r\n          let content = \"<h4>Your current location!</h4>\";\r\n          this.addInfoWindow(marker, content);\r\n        }\r\n      );\r\n    }\r\n  }\r\n\r\n  navToLocationService() {\r\n    this.viewCtrl.dismiss();\r\n    this.helperTools.ShowAlertWithTranslation(\r\n      \"Error\",\r\n      \"Please turn on location service or give app permission to your location service.\"\r\n    );\r\n    this.openNativeSettings.open(\"location\").then(val => {\r\n      // alert('location')\r\n    }).catch(err => {\r\n      console.log(err);\r\n    })\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/map-modal/map-modal.ts"],"sourceRoot":""}